<div class="h-full w-full flex flex-col justify-center items-center px-4">
  @if (shortLink()) {
    @if (!expirationDateCheck()) {
      <div class="expired-card">
        <mat-icon class="expired-icon">link_off</mat-icon>
        <h2 class="expired-title">This Link Has Expired</h2>
        <p class="expired-subtitle">The link you're trying to access is no longer available.</p>
      </div>
    }
    @else if (shortLink()?.security === SecurityOptions.PASSWORD) {
      <!-- Title -->
      <h2 class="!text-4xl mb-4">Please Enter the Password to the Link</h2>

      <!-- Password Input -->
      <mat-form-field appearance="outline" class="full-width mb-4">
        <mat-label>Password</mat-label>
        <input
          matInput
          [formControl]="passwordControl"
          [type]="showPassword ? 'text' : 'password'"
        />
        <button
          mat-icon-button
          matSuffix
          (click)="togglePasswordVisibility()"
          type="button"
          [attr.aria-label]="'Toggle password visibility'"
        >
          <mat-icon>{{ showPassword ? "visibility_off" : "visibility" }}</mat-icon>
        </button>
        <mat-error *ngIf="passwordControl.invalid"
          >This field is required</mat-error
        >
      </mat-form-field>

      <!-- Next Button -->
      <div class="button-row">
        <button
          mat-flat-button
          color="primary"
          [disabled]="!passwordControl.valid"
          (click)="passwordCheck()"
        >
          Next
        </button>
      </div>
    }
  } @else {
    <div class="h-full w-full flex items-center justify-center">
      <mat-spinner color="primary" diameter="40"></mat-spinner>
    </div>
  }
</div>
