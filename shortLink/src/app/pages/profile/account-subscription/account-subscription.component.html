<div class="w-full card p-md">
    <h3 class="!text-2xl mb-0 !font-light">Subscription</h3>

	<div class="card p-md flex justify-between items-center mt-md">
		<div class="flex items-center">
			<h4 class="!text-sm m-0 !mr-4 !font-semibold">{{ subscriptionProduct().attributes.name }}</h4>
			<mat-chip class="!text-sm">Current Plan</mat-chip>
		</div>

		<span class="!text-sm font-semibold">
			{{ subscriptionProduct().attributes.price_formatted }}
		</span>
	</div>

	<div class="mt-md flex items-center justify-between gap-4">
		<button class="w-full" mat-stroked-button>Change Plan</button>
		<button class="w-full" mat-stroked-button (click)="getHistory()">Billing History</button>
	</div>

	@if (userBillingHistory.length) {

		@for (invoice of userBillingHistory; track  invoice.id) {

			<div class="mt-md p-md border rounded-lg flex justify-between items-center">
				<div>
					<p class="!m-0 !font-semibold">{{invoice.attributes.user_name}} <mat-chip>
						{{ invoice.attributes.status_formatted }}
					</mat-chip> </p>
					<p class="!m-0 !text-sm text-gray-500">Date: {{ invoice.attributes.created_at | date:'mediumDate' }}</p>
					<a [href]="invoice.attributes.urls.invoice_url" target="_blank">View Details</a>
				</div>

				<span class="!font-semibold">{{ invoice.attributes.total_formatted }}</span>
			</div>
		}
	}
</div>