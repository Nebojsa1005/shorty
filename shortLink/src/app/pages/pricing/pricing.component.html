<mat-toolbar color="white">
  <button mat-button (click)="goHome()">Go Home</button>
</mat-toolbar>

<div class="flex justify-center w-full mt-md">
  <div class="p-md d-flex items-center justify-between">
    @for(product of products(); track product.id) {

    <div class=" mr-md ">
      <div
        class="price-badge p-sm text-sm w-full d-flex items-center justify-center"
        [ngClass]="{
          'price-badge-pro': product.attributes.name === PricingPlan.PRO,
          'price-badge-ultimate':
            product.attributes.name === PricingPlan.ULTIMATE
        }"
      >
        @if (product.attributes.name !== PricingPlan.ESSENTIAL) {
        <span>
          {{
            product.attributes.name === PricingPlan.PRO
              ? "Most Popular"
              : "Best Offer"
          }}
        </span>
        }
      </div>
      <div class="product p-md h-full">
        <div>
          <p>
            {{ product.attributes.name }}
          </p>

          <div
            class="text-sm/5 font-light mb-md"
            [innerHTML]="product.attributes.description"
          ></div>

          <p class="text-xl font-light mb-md">
            {{ product.attributes.price_formatted }}
          </p>

          <button
            class="w-full"
            mat-flat-button
            color="primary"
            [disabled]="product.id | isSubscribed : userProduct()"
            (click)="onBuyNow(product.attributes.buy_now_url)"
          >
            {{
              (product.id | isSubscribed : userProduct())
                ? "Current"
                : "Buy Now"
            }}
          </button>
        </div>
      </div>
    </div>
    }
  </div>
</div>

<button mat-button (click)="onCancel()">cancel</button>
